- subject_event = event_design.subject_event
- index = subject_event.event_designs.index(event_design)
- survey_number = (index ? index + 1 : 0)
- number_of_surveys = subject_event.event_designs.size
.card
  .card-body
    .text-center{ style: "font-size: 6rem;" }
      %i.fa.fa-tasks.text-success

    %h4.card-title
      = subject_event.name
      Surveys
    - if subject_event.percent.to_i.zero?
      .progress
        .progress-bar.progress-bar-striped{ role: "progressbar", style: "width: 100%;background-color: #ededed;", aria: { valuenow: "0", valuemin: "0", valuemax: "100" } }
    - else
      .progress
        .progress-bar.progress-bar-striped.bg-success{ role: "progressbar", style: "width: #{subject_event.percent}%;", aria: { valuenow: "#{subject_event.percent}", valuemin: "0", valuemax: "100" } }
    - if event_design.sheets.present?
      %p.card-text
        %div{ style: "color: #bdbdbd;" }
          Continue survey
          = survey_number
          of
          = succeed "." do
            = number_of_surveys
      .text-center
        - if event_design.valid?
          = link_to survey_page_path(event_design.event_id, event_design.design_id, page: 1), class: "btn btn-success btn-shadow" do
            Continue survey
            %i.fa.fa-caret-right
        - else
          .btn.btn-success.btn-shadow.disabled
            %i.fa.fa-exclamation-triangle
            Survey Unavailable

    - else
      %p.card-text
        %div{ style: "color: #bdbdbd;" }
          - if subject_event.percent.to_i.zero?
            Get started.
          - else
            Start survey
            = survey_number
            of
            = succeed "." do
              = number_of_surveys
      .text-center
        - if event_design.valid?
          = link_to survey_start_path(event_design.event_id, event_design.design_id), class: "btn btn-success btn-shadow" do
            Start survey
            %i.fa.fa-caret-right
        - else
          .btn.btn-success.btn-shadow.disabled
            %i.fa.fa-exclamation-triangle
            Survey unavailable
  - if event_design.valid?
    .card-footer
      .overflow-hidden.nowrap.text-muted.small
        = event_design.design_name
