- @title = "Complete Your Profile"

.page-box.last-slide.background-p50-grey.center-vertically-xs-sm
  .panel
    %h1= @title

    %p
      Thank you for agreeing to participate in the
      %strong= render "layouts/logo"
      research study! You're almost ready to help sleep research. To access our
      surveys, brain quizzes and (if eligible) a parking voucher, please
      %u confirm your identity
      with a few easy questions:


    = form_with(url: complete_profile_submit_path, method: :patch, local: true, id: "profile-form") do |form|
      .panel-icon.boston-color
        %i.fa.fa-birthday-cake

      .form-group
        = form.label :date_of_birth, class: "form-control-label" do
          What is your
          = succeed "?" do
            %strong Date of Birth
        .form-inline
          .input-group
            = form.select "date_of_birth[month]", Date::ABBR_MONTHNAMES[1..12].each_with_index.collect { |m, i| [m, i + 1] }, { include_blank: "mm", selected: params.dig(:date_of_birth, :month).present? ? params[:date_of_birth][:month] : nil }, class: "form-control #{"is-invalid" if @date_error}"
          &nbsp;
          \/
          &nbsp;
          .input-group
            = form.select "date_of_birth[day]", (1..31), { include_blank: "dd", selected: params.dig(:date_of_birth, :day).present? ? params[:date_of_birth][:day] : nil }, class: "form-control #{"is-invalid" if @date_error}"
          &nbsp;
          \/
          &nbsp;
          .input-group
            = form.select "date_of_birth[year]", (1900..Time.zone.today.year).to_a.reverse, { include_blank: "yyyy", selected: params.dig(:date_of_birth, :year).present? ? params[:date_of_birth][:year] : nil }, class: "form-control #{"is-invalid" if @date_error}"
        - if @date_error
          %small.form-text.text-danger Please enter a valid date.
        - else
          %small.form-text.text-muted mm/dd/yyyy

      .panel-icon.sleep-color
        %i.fa.fa-home

      .form-group
        = form.label :address, class: "form-control-label" do
          What is your
          = succeed "?" do
            %strong Address
        = form.text_area :address, class: "form-control #{"is-invalid" if @address_error}", value: params[:address], rows: 3
        - if @address_error
          %small.form-text.text-danger Please enter an address.
        - else
          %small.form-text.text-muted Ex: 75 Francis St, Boston, MA 02115

  .text-center
    = link_to "#", class: "btn btn-lg btn-success btn-shadow", data: { object: "submit", target: "#profile-form"  } do
      Finish enrollment
      %i.fa.fa-caret-right
